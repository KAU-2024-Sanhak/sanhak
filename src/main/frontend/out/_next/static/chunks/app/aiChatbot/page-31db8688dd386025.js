(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[549],{4846:function(e,l,t){Promise.resolve().then(t.bind(t,3927))},3927:function(e,l,t){"use strict";t.d(l,{default:function(){return x}});var s=t(7437),i=t(2265),r=t(6675);function o(e){let{chatRoomMockData:l,selectedCardId:t,onSelectCard:i}=e,r=(e,l)=>{i&&i(e,l)};return(0,s.jsxs)("div",{className:"w-1/3 h-full text-sm py-4 bg-gray-f8",children:[(0,s.jsx)("div",{className:"w-full mb-2 px-4 font-semibold",children:"경험카드 목록"}),l.map(e=>(0,s.jsx)("div",{className:`${e.cardId===t&&"bg-white rounded-lg border-2 border-gray-99"} w-11/12 h-7 bg-white border border-gray-d9 rounded-lg line-clamp-1 mb-2 mx-2 py-1 px-2 cursor-pointer`,onClick:()=>r(e.cardId,"AI 면접관"),children:e.title?.length&&e.title?.length>15?e.title?.substring(0,15)+"...":e.title},e.id))]})}function a(e){let{onResetChat:l,roles:t,selectedRole:r,handleSelectRole:o}=e,[a,n]=(0,i.useState)(!1),c=e=>{console.log("Role selected:",e.label),e.label!==r.label&&(o(e),l()),n(!1)};return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{className:"w-full flex items-center p-4 pb-2 font-bold text-left",onClick:()=>{console.log("Toggle dropdown"),n(!a)},children:[r?.label||"모델 선택",(0,s.jsx)("span",{className:"ml-2",children:(0,s.jsx)("img",{className:"w-2",src:"asset/png/icon_angle_bottom.png"})})]}),a&&(0,s.jsxs)("div",{className:"absolute z-10 w-[400px] p-4 mt-2 bg-white rounded-xl shadow-[4px_4px_8px_rgba(0,0,0,0.3)]",children:[(0,s.jsx)("p",{className:"text-sm text-gray-d9 mb-2",children:"모델 선택"}),t.map(e=>(0,s.jsxs)("div",{className:"p-2 cursor-pointer",onClick:()=>c(e),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"font-semibold",children:e.label}),r?.label===e.label&&(0,s.jsx)("img",{className:"w-4",src:"asset/png/icon_check.png"})]}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:e.description})]},e.label))]})]})}let n=[{label:"AI 면접관",description:"경험카드를 바탕으로 예상 면접질문 및 답변 생성",guideNotice:"어떤 예상질문을 뽑아드릴까요?"},{label:"AI 자소서 도우미",description:"경험카드를 기반으로 자기소개서 문항 생성",guideNotice:"어떤 자기소개서 문항을 작성해드릴까요?"},{label:"AI 포지션 질문",description:"포지션을 바탕으로 해당 직무와 언어에 대한 설명 생성",guideNotice:"해당 직무와 언어에 대해 어떤 점이 궁금한가요?"}];function c(e){let{chatData:l,chatInput:t,selectedCardTitle:r,onSendChat:o,onInputChange:c,onKeyDown:d,onResetChat:x,selectedChatId:f,selectedChatType:m}=e,h=(0,i.useRef)(null),[u,b]=(0,i.useState)(n),[p,g]=(0,i.useState)(u[0]),[j,w]=(0,i.useState)(!1),y=e=>{console.log("is role",e),g(e)},v=async()=>{if(console.log("Send button clicked"),t.trim()){if(null==f||null==m){console.error("채팅방이 선택되지 않았습니다."),o({id:l.length+1,isUser:0,content:"채팅방을 선택해 주세요."});return}o({id:l.length+1,isUser:1,content:t}),w(!0);try{let e=await fetch(`http://localhost:8080/api/chat/${f}/send/${m}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({question:t})});if(!e.ok)throw Error("서버 응답 실패");let s=await e.json(),i={id:l.length+2,isUser:0,content:s};o(i)}catch(e){console.error("채팅 전송 중 오류:",e),o({id:l.length+2,isUser:0,content:"오류가 발생했습니다. 다시 시도해 주세요."})}finally{w(!1)}}};return(0,i.useEffect)(()=>{h.current&&"scrollIntoView"in h.current&&h.current.scrollIntoView({behavior:"smooth"})},[l]),(0,s.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(a,{roles:u,selectedRole:p,onResetChat:()=>{console.log("onResetChat function passed to RoleDropdown"),x()},handleSelectRole:e=>{console.log("handleSelectRole function passed to RoleDropdown with role:",e),y(e)}})}),(0,s.jsxs)("div",{className:`w-full h-full flex flex-col items-center ${l.length>0?"justify-between":"justify-center"}`,children:[l.length>0?(0,s.jsxs)("div",{className:"w-5/6 h-full overflow-y-auto scrollbar-none pt-4",children:[l.map(e=>(0,s.jsx)("div",{className:`w-full mb-2 flex ${1===e.isUser?"justify-end":"justify-start"}`,children:(0,s.jsx)("div",{className:`${1===e.isUser?"bg-primary text-white":"bg-gray-ec text-black"} p-2 rounded-lg max-w-xs`,children:(0,s.jsx)("div",{children:e.content})})},e.id)),j&&(0,s.jsx)("div",{className:"w-full mb-2 flex justify-start",children:(0,s.jsx)("div",{className:"bg-gray-ec text-black p-2 rounded-lg max-w-xs",children:(0,s.jsx)("div",{children:"대기중..."})})}),(0,s.jsx)("div",{ref:h})]}):(0,s.jsx)("div",{className:"font-bold text-xl mb-4",children:p.guideNotice}),(0,s.jsxs)("div",{className:"w-5/6 flex items-center bg-white rounded-xl border border-gray-d9 mb-2",children:[(0,s.jsx)("input",{type:"text",value:t,className:"w-full h-10 border-0 rounded-xl text-sm focus:outline-0",placeholder:`AI에게 '${r}'에 대한 질문을 해보세요.`,onChange:c,onKeyDown:d}),(0,s.jsx)("div",{className:"w-8 h-7 flex justify-center items-center bg-primary rounded-full text-white font-semibold cursor-pointer text-xs mr-2 py-1",onClick:v,children:"전송"})]})]})]})}let d=[{label:"AI 면접관",description:"경험카드를 바탕으로 예상 면접질문 및 답변 생성",guideNotice:"어떤 예상질문을 뽑아드릴까요?"},{label:"AI 자소서 도우미",description:"경험카드를 기반으로 자기소개서 문항 생성",guideNotice:"어떤 자기소개서 문항을 작성해드릴까요?"},{label:"AI 포지션 질문",description:"포지션을 바탕으로 해당 직무와 언어에 대한 설명 생성",guideNotice:"해당 직무와 언어에 대해 어떤 점이 궁금한가요?"}];var x=()=>{let[e,l]=(0,i.useState)([]),[t,a]=(0,i.useState)(null),[n,x]=(0,i.useState)([]),[f,m]=(0,i.useState)([]),[h,u]=(0,i.useState)(null),[b,p]=(0,i.useState)(""),g=(0,i.useRef)(null),[j,w]=(0,i.useState)(d),[y,v]=(0,i.useState)(j[0]),N=async()=>{try{let e=await fetch("http://localhost:8080/api/chat/list",{method:"GET",credentials:"include"});if(e.ok){let l=await e.json();x(l)}else throw Error("채팅방 목록을 불러오는 중 오류가 발생했습니다.")}catch(e){e instanceof Error?console.error(e.message):console.error("An unknown error occurred")}},k=async(e,l)=>{let t;console.log("Initializing chat:",{chatId:e,chatRole:l}),t="AI 면접관"===l?0:"AI 자소서 도우미"===l?1:2;try{if((await fetch(`http://localhost:8080/api/chat/initialize/${e}/${t}`,{method:"GET",credentials:"include"})).ok)console.log("채팅이 성공적으로 초기화되었습니다.");else throw Error("채팅 초기화에 실패했습니다.")}catch(e){e instanceof Error?console.error(e.message):console.error("An unknown error occurred")}},E=async()=>{try{let e=await fetch("http://localhost:8080/api/card/",{method:"GET",credentials:"include"});if(e.ok){let t=await e.json();l(t)}else console.error("카드 목록을 불러오는 중 오류가 발생했습니다.")}catch(e){console.error("카드 목록 불러오기 오류:",e)}},S=async e=>{console.log("Fetching chat messages for chat ID:",e);try{let l=await fetch(`http://localhost:8080/api/chat/message/${e}`,{method:"GET",credentials:"include"});if(l.ok){let e=(await l.json()).map(e=>({id:e.cmid,isUser:e.cmisUser,content:e.cmcontent}));m(e)}else throw Error("채팅 메시지를 불러오는 중 오류가 발생했습니다.")}catch(e){e instanceof Error?console.error(e.message):console.error("An unknown error occurred")}};(0,i.useEffect)(()=>{N(),E()},[]);let I=(0,i.useCallback)(e=>{console.log("AiChatbotPage: handleSelectRole called with role:",e),v(e)},[]);(0,i.useEffect)(()=>{t&&y&&(console.log("useEffect - Initializing chat with selectedRole:",y),k(t.id,y.label),S(t.id))},[y,t]);let C=async()=>{if(b.trim()){let e={id:f.length+1,isUser:1,content:b};m([...f,e]),p("");try{let e,l=t?.id,s=t?.role;e="AI 면접관"===s?0:"AI 자소서 도우미"===s?1:2;let i=await fetch(`http://localhost:8080/api/chat/${l}/send/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({question:b})});if(!i.ok)throw Error("서버 응답 실패");let r=await i.json();console.log("Response Data:",r);let o={id:f.length+2,isUser:0,content:r.response};m(e=>[...e,o])}catch(l){console.error("채팅 전송 중 오류:",l);let e={id:f.length+2,isUser:0,content:"오류가 발생했습니다. 다시 시도해 주세요."};m(l=>[...l,e])}}};return(0,i.useEffect)(()=>{g.current&&"scrollIntoView"in g.current&&g.current.scrollIntoView({behavior:"smooth"})},[f]),(0,s.jsx)("div",{className:"w-full h-full flex flex-col items-center",children:(0,s.jsx)("div",{className:"w-[1400px] h-[90dvh]",children:(0,s.jsxs)("div",{className:"w-full h-full flex px-24",children:[(0,s.jsxs)("div",{className:"w-full h-full flex justify-between items-center",children:[(0,s.jsx)(o,{chatRoomMockData:n,selectedCardId:h?h.id:0,onSelectCard:l=>{let t=e.find(e=>e.id===l);if(t){u(t);let e=n.find(e=>e.cardId===l);e?(a(e),v(j.find(l=>l.label===e.role)||j[0]),k(e.id,e.role),S(e.id)):console.error("선택한 카드에 대한 채팅방이 없습니다.")}else console.error("선택한 카드가 목록에 없습니다.")}}),(0,s.jsx)(c,{roles:j,chatData:f,chatInput:b,selectedCardTitle:h?h.title:"",onSendChat:C,onInputChange:e=>{p(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),C())},onResetChat:()=>m([]),selectedChatId:t?.id,selectedChatType:y?.label,selectedRole:y,handleSelectRole:I})]}),(0,s.jsxs)("div",{className:"w-1/3 h-full flex flex-col pl-4 border-l border-gray-d9",children:[(0,s.jsx)("div",{className:"font-semibold py-4",children:"현재 선택한 경험카드"}),h&&(0,s.jsx)(r.Z,{card:h})]})]})})})}},6675:function(e,l,t){"use strict";t.d(l,{Z:function(){return a}});var s=t(7437),i=t(5439),r=t(2265),o=t(6755);function a(e){let{style:l,card:t}=e;console.log(t);let[a,n]=(0,r.useState)(!1),[c,d]=(0,r.useState)(t||null),[x,f]=(0,r.useState)({skills:0,category:0,tools:0});(0,r.useEffect)(()=>{t&&d(t)},[t]);let m={skills:(0,r.useRef)(null),category:(0,r.useRef)(null),tools:(0,r.useRef)(null)},h=e=>{let l=m[e].current;if(l&&c){let t=l.children,s=l.offsetWidth,i=0,r=0;for(let e=0;e<t.length;e++)if((i+=t[e].clientWidth)<=s)r++;else break;let o=c[e]?c[e]?.length-r:0;f(l=>({...l,[e]:o>0?o:0}))}};(0,r.useEffect)(()=>{h("skills"),h("category"),h("tools");let e=new ResizeObserver(()=>{h("skills"),h("category"),h("tools")});return Object.values(m).forEach(l=>{l.current&&e.observe(l.current)}),()=>{Object.values(m).forEach(l=>{l.current&&e.unobserve(l.current)}),e.disconnect()}},[c?.skills,c?.category,c?.tools]);let u=()=>{n(!a)};return(0,s.jsx)("div",{className:`${l||""} w-[400px] h-[75dvh] max-h-[600px] relative mb-4`,children:(0,s.jsxs)(o.E.div,{className:"w-full h-full relative",initial:!1,animate:{rotateY:a?180:0},transition:{duration:.7},style:{transformStyle:"preserve-3d",perspective:1e3},children:[(0,s.jsxs)(o.E.div,{className:`absolute w-full h-full flex flex-col items-start bg-white rounded-xl shadow-[4px_4px_8px_rgba(0,0,0,0.3)] ${a?"rotate-y-180":""}`,style:{backfaceVisibility:"hidden"},children:[(0,s.jsx)("div",{className:"w-full h-2/3 px-5 pt-5 pb-2",children:c?.imageUrl&&(0,s.jsx)("img",{className:"w-full h-full object-cover rounded-t-xl",src:c?.imageUrl,alt:""})}),(0,s.jsxs)("div",{className:"w-full h-2/3 flex flex-col justify-around",children:[(0,s.jsxs)("div",{className:"flex flex-col justify-between items-start px-4",children:[(c?.fromDate||c?.toDate)&&(0,s.jsxs)("div",{className:"font-normal text-gray-cc",children:[c?.fromDate," ~ ",c?.toDate]}),c?.title&&(0,s.jsx)("div",{className:"font-semibold text-3xl mb-2",children:c?.title}),(0,s.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,s.jsx)("div",{className:"flex items-center",children:c?.category&&c?.category.length>0&&(0,s.jsx)("div",{ref:m.category,className:"h-[35px] flex flex-wrap overflow-hidden items-center text-sm font-semibold mb-1",children:c?.category.map(e=>s.jsx(i.Z,{type:"category",label:e},e))})}),x.category>0&&(0,s.jsxs)("div",{className:"ml-2 mb-2 text-xs text-gray-500",children:["[+",x.category,"]"]})]}),(0,s.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,s.jsx)("div",{className:"flex items-center",children:c?.skills&&c?.skills.length>0&&(0,s.jsx)("div",{ref:m.skills,className:"h-auto max-h-[35px] min-h-[35px] flex flex-wrap overflow-hidden items-center text-sm font-semibold mb-1",children:c?.skills.map(e=>s.jsx(i.Z,{type:"skill",label:e.name},e.id))})}),x.skills>0&&(0,s.jsxs)("div",{className:"ml-2 text-xs text-gray-500",children:["[+",x.skills,"]"]})]}),(0,s.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,s.jsx)("div",{children:c?.tools&&c?.tools.length>0&&(0,s.jsx)("div",{ref:m.tools,className:"h-[35px] flex flex-wrap overflow-hidden items-center text-sm font-semibold mb-1",children:c?.tools.map(e=>s.jsx(i.Z,{type:"tool",label:e.name},e.id))})}),x.tools>0&&(0,s.jsxs)("div",{className:"ml-2 text-xs text-gray-500",children:["[+",x.tools,"]"]})]})]}),(0,s.jsx)("div",{className:"h-1/3 flex flex-col justify-between px-4 pb-2",children:c?.reflection&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"line-clamp-4 text-sm mt-2 font-semibold",children:c?.reflection}),(0,s.jsx)("div",{className:"flex justify-end items-end",children:(0,s.jsx)("button",{onClick:u,className:"text-xs text-primary font-bold",children:"자세히 보기 ->"})})]})})]})]}),(0,s.jsxs)(o.E.div,{className:`absolute overflow-y-auto scrollbar w-full h-full flex flex-col justify-between items-start bg-white rounded-xl shadow-[4px_4px_8px_rgba(0,0,0,0.3)] ${a?"":"rotate-y-180"}`,style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[(0,s.jsxs)("div",{className:"w-full flex flex-col p-4",children:[(0,s.jsxs)("div",{className:"w-full flex-col",children:[(0,s.jsx)("div",{className:"text-md font-bold mb-1",children:"역할"}),c?.category&&(0,s.jsx)("div",{className:"flex flex-wrap items-center text-sm font-semibold mb-2",children:c?.category.map(e=>s.jsx(i.Z,{type:"category",label:e},e))})]}),(0,s.jsxs)("div",{className:"w-full flex-col",children:[(0,s.jsx)("div",{className:"text-md font-bold mb-1",children:"언어와 스킬"}),c?.skills&&(0,s.jsx)("div",{className:"flex flex-wrap items-center text-sm font-semibold mb-2",children:c?.skills.map(e=>s.jsx(i.Z,{type:"skill",label:e.name},e.id))})]}),(0,s.jsxs)("div",{className:"w-full flex-col",children:[(0,s.jsx)("div",{className:"text-md font-bold mb-1",children:"개발 도구"}),c?.tools&&(0,s.jsx)("div",{className:"flex flex-wrap items-center text-sm font-semibold mb-2",children:c?.tools.map(e=>s.jsx(i.Z,{type:"tool",label:e.name},e.id))})]}),c?.reflection&&(0,s.jsxs)("div",{className:"w-full flex-col",children:[(0,s.jsx)("div",{className:"text-md font-bold mb-1",children:"경험 요약"}),(0,s.jsx)("div",{className:"text-sm mt-2 font-semibold",children:c?.summary})]})]}),(0,s.jsx)("div",{className:"w-full flex justify-end items-end px-4 pb-4",children:(0,s.jsx)("button",{onClick:u,className:"text-xs text-primary font-bold",children:"간단히 보기 ->"})})]})]})})}t(3464)},5439:function(e,l,t){"use strict";t.d(l,{Z:function(){return r}});var s=t(7437);t(2265);let i={frontend:"웹/프론트엔드",backend:"웹/백엔드",data:"데이터 사이언스",security:"보안",application:"어플리케이션"};function r(e){let{style:l,label:t,type:r,onClick:o}=e,a=t.toLowerCase().replace(/\s+/g,"").replace(/\./g,"").replace(/#/g,"sharp"),n=`/asset/png/${r}/${a}_img.png`,c="category"===r&&i[t]||t;return(0,s.jsxs)("div",{className:`${l||"bg-primary text-white border-white"} text-sm font-semibold flex border rounded-xl px-4 py-1 mr-2 mb-2`,onClick:o||void 0,children:[(0,s.jsx)("img",{className:"w-[20px] h-[20px] object-contain mr-2",src:n,alt:t}),c]})}}},function(e){e.O(0,[701,971,117,744],function(){return e(e.s=4846)}),_N_E=e.O()}]);