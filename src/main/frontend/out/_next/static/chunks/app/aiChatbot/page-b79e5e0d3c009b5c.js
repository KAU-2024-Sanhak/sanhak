(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[549],{4846:function(e,l,t){Promise.resolve().then(t.bind(t,3927))},3927:function(e,l,t){"use strict";t.d(l,{default:function(){return o}});var s=t(7437),i=t(2265),a=t(6675);function r(e){let{chatRoomMockData:l,selectedCardId:t,onSelectCard:i}=e,a=(e,l)=>{i&&i(e,l)};return(0,s.jsxs)("div",{className:"w-1/3 h-full text-sm py-4 bg-gray-f8",children:[(0,s.jsx)("div",{className:"w-full mb-2 px-4 font-semibold",children:"경험카드 목록"}),l.map(e=>(0,s.jsx)("div",{className:`${e.cardId===t&&"bg-white rounded-lg border-2 border-gray-99"} w-11/12 h-7 bg-white border border-gray-d9 rounded-lg line-clamp-1 mb-2 mx-2 py-1 px-2 cursor-pointer`,onClick:()=>a(e.cardId,"AI 면접관"),children:e.title?.length&&e.title?.length>15?e.title?.substring(0,15)+"...":e.title},e.id))]})}function c(e){let{onResetChat:l,roles:t,selectedRole:a,handleSelectRole:r}=e,[c,n]=(0,i.useState)(!1),o=e=>{console.log("Role selected:",e.label),e.label!==a.label&&(r(e),l()),n(!1)};return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{className:"w-full flex items-center p-4 pb-2 font-bold text-left",onClick:()=>{console.log("Toggle dropdown"),n(!c)},children:[a?.label||"모델 선택",(0,s.jsx)("span",{className:"ml-2",children:(0,s.jsx)("img",{className:"w-2",src:"asset/png/icon/icon_angle_bottom.png"})})]}),c&&(0,s.jsxs)("div",{className:"absolute z-10 w-[400px] p-4 mt-2 bg-white rounded-xl shadow-[4px_4px_8px_rgba(0,0,0,0.3)]",children:[(0,s.jsx)("p",{className:"text-sm text-gray-d9 mb-2",children:"모델 선택"}),t.map(e=>(0,s.jsxs)("div",{className:"p-2 cursor-pointer",onClick:()=>o(e),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"font-semibold",children:e.label}),a?.label===e.label&&(0,s.jsx)("img",{className:"w-4",src:"asset/png/icon/icon_check.png"})]}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:e.description})]},e.label))]})]})}var n=e=>{let{roles:l,chatData:t,chatInput:a,selectedCardTitle:r,onSendChat:n,onInputChange:o,onKeyDown:d,onResetChat:x,selectedChatId:m,selectedChatType:f,selectedRole:h,handleSelectRole:u}=e,b=(0,i.useRef)(null),[p,j]=(0,i.useState)(!1);(0,i.useEffect)(()=>{b.current?.scrollIntoView({behavior:"smooth"})},[t]);let g=async()=>{if(a.trim()){if(null==m||null==f){n({id:t.length+1,isUser:0,content:"채팅방을 선택해 주세요."});return}n({id:t.length+1,isUser:1,content:a}),j(!0);try{let e=await fetch(`http://localhost:8080/api/chat/${m}/send/${f}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({question:a})});if(!e.ok)throw Error("서버 응답 실패");let l=await e.json(),s={id:t.length+2,isUser:0,content:l};n(s)}catch(e){console.error("채팅 전송 중 오류:",e),n({id:t.length+2,isUser:0,content:"오류가 발생했습니다. 다시 시도해 주세요."})}finally{j(!1)}}};return(0,s.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,s.jsx)("div",{className:"w-full",children:(0,s.jsx)(c,{roles:l,selectedRole:h,onResetChat:x,handleSelectRole:u})}),(0,s.jsxs)("div",{className:`w-full h-full flex flex-col items-center ${t.length>0?"justify-between":"justify-center"}`,children:[t.length>0?(0,s.jsxs)("div",{className:"w-5/6 h-full overflow-y-auto scrollbar-none pt-4",children:[t.map(e=>(0,s.jsx)("div",{className:`w-full mb-2 flex ${1===e.isUser?"justify-end":"justify-start"}`,children:(0,s.jsx)("div",{className:`${1===e.isUser?"bg-primary text-white":"bg-gray-ec text-black"} p-2 rounded-lg max-w-xs`,children:(0,s.jsx)("div",{children:e.content})})},e.id)),p&&(0,s.jsx)("div",{className:"w-full mb-2 flex justify-start",children:(0,s.jsx)("div",{className:"bg-gray-ec text-black p-2 rounded-lg max-w-xs",children:(0,s.jsx)("div",{children:"대기중..."})})}),(0,s.jsx)("div",{ref:b})]}):(0,s.jsx)("div",{className:"font-bold text-xl mb-4",children:h.guideNotice}),(0,s.jsxs)("div",{className:"w-5/6 flex items-center bg-white rounded-xl border border-gray-d9 mb-2",children:[(0,s.jsx)("input",{type:"text",value:a,className:"w-full h-10 border-0 rounded-xl text-sm focus:outline-0",placeholder:`AI에게 '${r}'에 대한 질문을 해보세요.`,onChange:o,onKeyDown:d}),(0,s.jsx)("div",{className:"w-8 h-7 flex justify-center items-center bg-primary rounded-full text-white font-semibold cursor-pointer text-xs mr-2 py-1",onClick:g,children:"전송"})]})]})]})},o=()=>{let[e,l]=(0,i.useState)([]),[t,c]=(0,i.useState)([]),[o,d]=(0,i.useState)(null),[x,m]=(0,i.useState)([]),[f,h]=(0,i.useState)(null),[u,b]=(0,i.useState)(""),[p,j]=(0,i.useState)([{label:"AI 면접관",description:"경험카드를 바탕으로 예상 면접질문 및 답변 생성",guideNotice:"어떤 예상질문을 뽑아드릴까요?"},{label:"AI 자소서 도우미",description:"경험카드를 기반으로 자기소개서 문항 생성",guideNotice:"어떤 자기소개서 문항을 작성해드릴까요?"},{label:"AI 포지션 질문",description:"포지션을 바탕으로 해당 직무와 언어에 대한 설명 생성",guideNotice:"해당 직무와 언어에 대해 어떤 점이 궁금한가요?"}]),[g,w]=(0,i.useState)(p[0]);(0,i.useRef)(null);let y=async()=>{try{let e=await fetch("http://localhost:8080/api/chat/list",{method:"GET",credentials:"include"});if(e.ok){let l=await e.json();c(l)}else throw Error("채팅방 목록을 불러오는 중 오류가 발생했습니다.")}catch(e){console.error(e)}},v=async()=>{try{let e=await fetch("http://localhost:8080/api/card/",{method:"GET",credentials:"include"});if(e.ok){let t=await e.json();l(t)}else throw Error("카드 목록을 불러오는 중 오류가 발생했습니다.")}catch(e){console.error(e)}},N=async e=>{try{let l=await fetch(`http://localhost:8080/api/chat/message/${e}`,{method:"GET",credentials:"include"});if(l.ok){let e=(await l.json()).map(e=>({id:e.cmid,isUser:e.cmisUser,content:e.cmcontent}));m(e)}else throw Error("채팅 메시지 불러오기 실패")}catch(e){console.error(e)}},k=async(e,l)=>{try{if((await fetch(`http://localhost:8080/api/chat/initialize/${e}/${p.indexOf(l)}`,{method:"GET",credentials:"include"})).ok)m([]);else throw Error("채팅 초기화에 실패했습니다.")}catch(e){console.error(e)}},E=async()=>{if(!u.trim()||!o)return;let e={id:x.length+1,isUser:1,content:u};m(l=>[...l,e]),b("");try{let e=await fetch(`http://localhost:8080/api/chat/${o.id}/send/${p.indexOf(g)}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({question:u})});if(e.ok){let l=await e.json(),t={id:x.length+2,isUser:0,content:l.response};m(e=>[...e,t])}else throw Error("채팅 전송 실패")}catch(e){console.error(e)}};return(0,i.useEffect)(()=>{y(),v()},[]),(0,s.jsx)("div",{className:"w-full h-full flex flex-col items-center",children:(0,s.jsx)("div",{className:"w-[1400px] h-[90dvh]",children:(0,s.jsxs)("div",{className:"w-full h-full flex px-24",children:[(0,s.jsx)(r,{chatRoomMockData:t,selectedCardId:f?.id||0,onSelectCard:l=>{let s=e.find(e=>e.id===l);if(s){h(s);let e=t.find(e=>e.cardId===l);e&&(d(e),k(e.id,g),N(e.id))}}}),(0,s.jsx)(n,{roles:p,chatData:x,chatInput:u,selectedCardTitle:f?.title||"",onSendChat:E,onInputChange:e=>{b(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),E())},onResetChat:()=>m([]),selectedChatId:o?.id||0,selectedChatType:g.label,selectedRole:g,handleSelectRole:w}),(0,s.jsxs)("div",{className:"w-1/3 h-full flex flex-col pl-4 border-l border-gray-d9",children:[(0,s.jsx)("div",{className:"font-semibold py-4",children:"현재 선택한 경험카드"}),f&&(0,s.jsx)(a.Z,{card:f})]})]})})})}},6675:function(e,l,t){"use strict";t.d(l,{Z:function(){return c}});var s=t(7437),i=t(5439),a=t(2265),r=t(1269);function c(e){let{style:l,card:t}=e;console.log(t);let[c,n]=(0,a.useState)(!1),[o,d]=(0,a.useState)(t||null),[x,m]=(0,a.useState)({skills:0,category:0,tools:0});(0,a.useEffect)(()=>{t&&d(t)},[t]);let f={skills:(0,a.useRef)(null),category:(0,a.useRef)(null),tools:(0,a.useRef)(null)},h=e=>{let l=f[e].current;if(l&&o){let t=l.children,s=l.offsetWidth,i=0,a=0;for(let e=0;e<t.length;e++)if((i+=t[e].clientWidth)<=s)a++;else break;let r=o[e]?o[e]?.length-a:0;m(l=>({...l,[e]:r>0?r:0}))}};(0,a.useEffect)(()=>{h("skills"),h("category"),h("tools");let e=new ResizeObserver(()=>{h("skills"),h("category"),h("tools")});return Object.values(f).forEach(l=>{l.current&&e.observe(l.current)}),()=>{Object.values(f).forEach(l=>{l.current&&e.unobserve(l.current)}),e.disconnect()}},[o?.skills,o?.category,o?.tools]);let u=()=>{n(!c)};return(0,s.jsx)("div",{className:`${l||""} w-full h-[65dvh] xs:w-[400px] xs:h-[75dvh] max-h-[600px] relative mb-4`,children:(0,s.jsxs)(r.E.div,{className:"w-full h-full relative",initial:!1,animate:{rotateY:c?180:0},transition:{duration:.7},style:{transformStyle:"preserve-3d",perspective:1e3},children:[(0,s.jsxs)(r.E.div,{className:`absolute w-full h-full flex flex-col items-start bg-white rounded-xl shadow-[4px_4px_8px_rgba(0,0,0,0.3)] ${c?"rotate-y-180":""}`,style:{backfaceVisibility:"hidden"},children:[(0,s.jsx)("div",{className:"w-full h-2/3 px-5 pt-5 pb-2",children:o?.imageUrl&&(0,s.jsx)("img",{className:"w-full h-full object-cover rounded-t-xl",src:o?.imageUrl,alt:""})}),(0,s.jsxs)("div",{className:"w-full h-2/3 flex flex-col justify-around",children:[(0,s.jsxs)("div",{className:"flex flex-col justify-between items-start px-4",children:[(o?.fromDate||o?.toDate)&&(0,s.jsxs)("div",{className:"font-normal text-gray-cc",children:[o?.fromDate," ~ ",o?.toDate]}),o?.title&&(0,s.jsx)("div",{className:"font-semibold text-3xl mb-2",children:o?.title}),(0,s.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,s.jsx)("div",{className:"flex items-center",children:o?.category&&o?.category.length>0&&(0,s.jsx)("div",{ref:f.category,className:"h-[35px] flex flex-wrap overflow-hidden items-center text-sm font-semibold mb-1",children:o?.category.map(e=>s.jsx(i.Z,{type:"category",label:e},e))})}),x.category>0&&(0,s.jsxs)("div",{className:"ml-2 mb-2 text-xs text-gray-500",children:["[+",x.category,"]"]})]}),(0,s.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,s.jsx)("div",{className:"flex items-center",children:o?.skills&&o?.skills.length>0&&(0,s.jsx)("div",{ref:f.skills,className:"h-auto max-h-[35px] min-h-[35px] flex flex-wrap overflow-hidden items-center text-sm font-semibold mb-1",children:o?.skills.map(e=>s.jsx(i.Z,{type:"skill",label:e.name},e.id))})}),x.skills>0&&(0,s.jsxs)("div",{className:"ml-2 text-xs text-gray-500",children:["[+",x.skills,"]"]})]}),(0,s.jsxs)("div",{className:"w-full flex justify-between items-center",children:[(0,s.jsx)("div",{children:o?.tools&&o?.tools.length>0&&(0,s.jsx)("div",{ref:f.tools,className:"h-[35px] flex flex-wrap overflow-hidden items-center text-sm font-semibold mb-1",children:o?.tools.map(e=>s.jsx(i.Z,{type:"tool",label:e.name},e.id))})}),x.tools>0&&(0,s.jsxs)("div",{className:"ml-2 text-xs text-gray-500",children:["[+",x.tools,"]"]})]})]}),(0,s.jsx)("div",{className:"h-1/3 flex flex-col justify-between px-4 pb-2",children:o?.reflection&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"line-clamp-4 text-sm mt-2 font-semibold",children:o?.reflection}),(0,s.jsx)("div",{className:"flex justify-end items-end",children:(0,s.jsx)("button",{onClick:u,className:"text-xs text-primary font-bold",children:"자세히 보기 ->"})})]})})]})]}),(0,s.jsxs)(r.E.div,{className:`absolute overflow-y-auto scrollbar w-full h-full flex flex-col justify-between items-start bg-white rounded-xl shadow-[4px_4px_8px_rgba(0,0,0,0.3)] ${c?"":"rotate-y-180"}`,style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)"},children:[(0,s.jsxs)("div",{className:"w-full flex flex-col p-4",children:[(0,s.jsxs)("div",{className:"w-full flex-col",children:[(0,s.jsx)("div",{className:"text-md font-bold mb-1",children:"역할"}),o?.category&&(0,s.jsx)("div",{className:"flex flex-wrap items-center text-sm font-semibold mb-2",children:o?.category.map(e=>s.jsx(i.Z,{type:"category",label:e},e))})]}),(0,s.jsxs)("div",{className:"w-full flex-col",children:[(0,s.jsx)("div",{className:"text-md font-bold mb-1",children:"언어와 스킬"}),o?.skills&&(0,s.jsx)("div",{className:"flex flex-wrap items-center text-sm font-semibold mb-2",children:o?.skills.map(e=>s.jsx(i.Z,{type:"skill",label:e.name},e.id))})]}),(0,s.jsxs)("div",{className:"w-full flex-col",children:[(0,s.jsx)("div",{className:"text-md font-bold mb-1",children:"개발 도구"}),o?.tools&&(0,s.jsx)("div",{className:"flex flex-wrap items-center text-sm font-semibold mb-2",children:o?.tools.map(e=>s.jsx(i.Z,{type:"tool",label:e.name},e.id))})]}),o?.reflection&&(0,s.jsxs)("div",{className:"w-full flex-col",children:[(0,s.jsx)("div",{className:"text-md font-bold mb-1",children:"경험 요약"}),(0,s.jsx)("div",{className:"text-sm mt-2 font-semibold",children:o?.summary})]})]}),(0,s.jsx)("div",{className:"w-full flex justify-end items-end px-4 pb-4",children:(0,s.jsx)("button",{onClick:u,className:"text-xs text-primary font-bold",children:"간단히 보기 ->"})})]})]})})}t(3464)},5439:function(e,l,t){"use strict";t.d(l,{Z:function(){return a}});var s=t(7437);t(2265);let i={frontend:"웹/프론트엔드",backend:"웹/백엔드",data:"데이터 사이언스",security:"보안",application:"어플리케이션"};function a(e){let{style:l,label:t,type:a,onClick:r}=e,c=t.toLowerCase().replace(/\s+/g,"").replace(/\./g,"").replace(/#/g,"sharp"),n=`/asset/png/${a}/${c}_img.png`,o="category"===a&&i[t]||t;return(0,s.jsxs)("div",{className:`${l||"bg-primary text-white border-white"} text-sm font-semibold flex border rounded-xl px-4 py-1 mr-2 mb-2`,onClick:r||void 0,children:[(0,s.jsx)("img",{className:"w-[20px] h-[20px] object-contain mr-2",src:n,alt:t}),o]})}}},function(e){e.O(0,[860,971,117,744],function(){return e(e.s=4846)}),_N_E=e.O()}]);